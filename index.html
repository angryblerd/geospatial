<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
		<link rel="stylesheet" href="./dojo/dijit/themes/claro/claro.css">
		<link rel="stylesheet" href="https://js.arcgis.com/3.21/esri/css/esri.css">
		
		<style>
			html, body, #map {
				margin: 0;
				padding: 0;
				height: 0;
				width: 0;
			}

			.navbar {
				position: fixed;
				top: 20px;
				left: 100px;
				right: 100px;
				height: 50px;
				background-color: #333;
				border-radius: 5px;
			}
			.navbar .logo {
				position: relative;
				float: left;
				height: 50px;
				width: 50px;
				overflow: hidden;
			}
			.navbar .logo img {
				padding: 5px 10px;
				height: 40px;
				width: 40px;
			}
			.navbar .title {
				position: relative;
				float: left;
				height: 50px;
				width: 200px;
				overflow: hidden;
			}
			.navbar .title span {
				position: relative;
				top: 5px;
				left: 15px;
				font-family: Avenir;
				font-size: 30px;
				color: white;
				letter-spacing: 5px;
			}
			.navbar .menu {
				position: relative;
				float: right;
				top: 10px;
			}
			.navbar .menu button {
				color: white;
				background-color: transparent;
				border: none;
				font-size: 30px;
				margin-right: 10px;
			}
			.navbar .menu button:hover {
				cursor: pointer;
				opacity: 0.5;
			}
			.toolbench {
				position: fixed;
				top: 20px;
				right: 20px;
				background-color: #333;
				padding: 5px;
				border-radius: 5px;
			}
			.toolbench button {
				position: relative;
				text-decoration: none;
				background-color: transparent;
				color: white;
				font-size: 35px;
				border: 0;
			}
			.toolbench button:hover {
				cursor: pointer;
				opacity: 0.5;
			}
			.esri-icon-up {
				position: fixed;
				bottom: 5px;
				left: 50%;
				font-size: 30px;
				color: black;
				text-decoration: none;
				background-color: transparent;
				border: none;
			}
			.esri-icon-up:hover {
				cursor: pointer;
				opacity: 0.75;
			}
			.esri-icon-handle-horizontal {
				position: fixed;
				bottom: 5px;
				left: 50%;
				font-size: 30px;
				color: black;
				text-decoration: none;
				background-color: transparent;
				border: none;
			}
			.esri-icon-handle-horizontal:hover {
				cursor: pointer;
				opacity: 0.5;
			}
		</style>
		
  		<script src="https://js.arcgis.com/3.21/"></script>
		<script>dojoConfig = {parseOnLoad: true}</script>
		<script>
			require([
				"esri/layers/FeatureLayer",
				"esri/dijit/FeatureTable",
				"dijit/layout/TabContainer",
				"dijit/layout/ContentPane",
				"dojo/dom",
				"dojo/dom-class",
				"dojo/on",
				"dojo/domReady!"
			], function(FeatureLayer, FeatureTable, TabContainer, ContentPane, dom, domClass, on) {
				var table = new TabContainer({
					style: "height: 100%; width: 100%; font-family: Arial; font-size: 14px;"
				}, "table");

				var tabAmbulances = new ContentPane({
					title: "Ambulances",
					id: "tabAmbulances"
				});

				table.addChild(tabAmbulances);

				var tabPolice = new ContentPane({
					title: "Police Departments",
					id: "tabPolice"
				});

				table.addChild(tabPolice);

				var tabFire = new ContentPane({
					title: "Fire Departments",
					id: "tabFire"
				});

				table.addChild(tabFire);

				table.startup();
				
				var flAmbulance_url = "https://sampleserver6.arcgisonline.com/arcgis/rest/services/RedlandsEmergencyVehicles/FeatureServer/0";
				
				var flAmbulance = new FeatureLayer(
					flAmbulance_url,
					{
						mode: FeatureLayer.MODE_ONDEMAND,
						outFields: ["*"],
						visible: true,
						id: "flAmbulance"
					}
				);
				
				var ftAmbulance = new FeatureTable({
					featureLayer: flAmbulance,
					showGridMenu: false
				}, "tblAmbulance");
				
				ftAmbulance.startup();
				
				var flPolice_url = "https://sampleserver6.arcgisonline.com/arcgis/rest/services/RedlandsEmergencyVehicles/FeatureServer/1";
				
				var flPolice = new FeatureLayer(
					flPolice_url,
					{
						mode: FeatureLayer.MODE_ONDEMAND,
						outFields: ["*"],
						visible: true,
						id: "flPolice"
					}
				);
				
				var ftPolice = new FeatureTable({
					featureLayer: flPolice,
					showGridMenu: false
				}, "tblPolice");
				
				ftPolice.startup();
				
				var flFire_url = "https://sampleserver6.arcgisonline.com/arcgis/rest/services/RedlandsEmergencyVehicles/FeatureServer/2";
				
				var flFire = new FeatureLayer(
					flFire_url,
					{
						mode: FeatureLayer.MODE_ONDEMAND,
						outFields: ["*"],
						visible: true,
						id: "flFire"
					}
				);
				
				var ftFire = new FeatureTable({
					featureLayer: flFire,
					showGridMenu: false
				}, "tblFire");
				
				ftFire.startup();
				
				on(dom.byId("table_tablist_tabAmbulances"), "click", function() {
					dom.byId("tblAmbulance").style.display = "block";
					dom.byId("tblPolice").style.display = "none";
					dom.byId("tblFire").style.display = "none";
				});
				on(dom.byId("table_tablist_tabPolice"), "click", function() {
					dom.byId("tblAmbulance").style.display = "none";
					dom.byId("tblPolice").style.display = "block";
					dom.byId("tblFire").style.display = "none";
				});
				on(dom.byId("table_tablist_tabFire"), "click", function() {
					dom.byId("tblAmbulance").style.display = "none";
					dom.byId("tblPolice").style.display = "none";
					dom.byId("tblFire").style.display = "block";
				});
				dom.byId("tabContainer").style.display = "none";
				on(dom.byId("btnTables"), "click",  function() {
					if (dom.byId("tabContainer").style.display === "none") {
						dom.byId("tabContainer").style.display = "block";
						dom.byId("btnTables").style.bottom = "30%";
						domClass.replace("btnTables", "esri-icon-handle-horizontal", "esri-icon-up");
					} else {
						dom.byId("tabContainer").style.display = "none";
						dom.byId("btnTables").style.bottom = "5px";
						domClass.replace("btnTables", "esri-icon-up", "esri-icon-handle-horizontal");
					}
				});
			});
		</script>
	</head>
	<body class="claro esri">
		<div class="navbar">
			<div class="logo"><img src="./images/usms-badge.png"/></div>
			<div class="title"><span>Heimdall</span></div>
			<div class="menu">
				<button class="esri-icon-layers"></button>
				<button class="esri-icon-description"></button>
			</div>
		</div>
		<div class="toolbench">
			<button class="esri-icon-down-arrow"></button>
		</div>
		<button id="btnTables" class="esri-icon-up"></button>
		<div id="tabContainer" style="position:fixed; width:100%; height:32%; bottom:0; left:0;">
			<div id="table">
				<div id="tblAmbulance"></div>
				<div id="tblPolice"></div>
				<div id="tblFire"></div>
			</div>
		</div>
	</body>
</html>
